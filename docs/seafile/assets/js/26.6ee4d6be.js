(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{270:function(e,t,s){"use strict";s.r(t);var a=s(28),i=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"ssl-https"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ssl-https"}},[e._v("#")]),e._v(" SSL/HTTPS")]),e._v(" "),s("p",[e._v("网站完成域名绑定且可以通过HTTP访问之后，方可设置HTTPS。")]),e._v(" "),s("p",[e._v("Seafile预装包已内置 SSL 模块方案，需要根据自己的域名进行设置方可使用")]),e._v(" "),s("h2",{attrs:{id:"基本设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本设置"}},[e._v("#")]),e._v(" 基本设置")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("使用 SFTP 连接服务器，编辑 "),s("RouterLink",{attrs:{to:"/zh/stack-components.html#docker-compose"}},[e._v("docker-compose 配置文件")]),e._v(" "),s("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/zh/seafile/seafile-editconfig-websoft9.png",alt:""}})],1)]),e._v(" "),s("li",[s("p",[e._v("最少修改配置文件三个核心参数，然后保存")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  seafile:\n image: seafileltd/seafile-mc:latest\n container_name: seafile\n ports:\n   - \"80:80\"\n   - \"443:443\"  # If https is enabled, cancel the comment.\n volumes:\n   - /data/seafile:/shared   # Requested, specifies the path to Seafile data persistent store.\n environment:\n   - DB_HOST=db\n   - DB_ROOT_PASSWD=123456  # Requested, the value shuold be root's password of MySQL service.\n  #      - TIME_ZONE=Asia/Shanghai # Optional, default is UTC. Should be uncomment and set to your local time zone.\n   - SEAFILE_ADMIN_EMAIL=admin@admin.com # Specifies Seafile admin user, default is 'me@example.com'.\n   - SEAFILE_ADMIN_PASSWORD=admin123   # Specifies Seafile admin password, default is 'asecret'.\n   - SEAFILE_SERVER_LETSENCRYPT=true   # Whether use letsencrypt to generate cert.\n   - SEAFILE_SERVER_HOSTNAME=seafile.websoft9.cn # Specifies your host name.\n\n")])])]),s("ul",[s("li",[e._v('去掉#注释，启用 "443:443" 端口')]),e._v(" "),s("li",[e._v("SEAFILE_SERVER_LETSENCRYPT 设置为 true")]),e._v(" "),s("li",[e._v("SEAFILE_SERVER_HOSTNAME 修改为你自己的域名")])])]),e._v(" "),s("li",[s("p",[e._v("运行 compose 重建命令")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo cd /data && docker-compose up -d\n")])])])]),e._v(" "),s("li",[s("p",[e._v("HTTPS 设置成功")])])]),e._v(" "),s("p",[e._v("以上方案是对 Seafile 官方文档："),s("a",{attrs:{href:"https://manual-cn-origin.seafile.com/deploy/deploy_with_docker#xiang-lets-encrypt-shen-qing-ssl-zheng-shu",target:"_blank",rel:"noopener noreferrer"}},[e._v("向Let's encrypt申请SSL证书"),s("OutboundLink")],1),e._v("的实践解读，验证可用")]),e._v(" "),s("h2",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[e._v("#")]),e._v(" 常见问题")]),e._v(" "),s("h4",{attrs:{id:"设置https之后，seafile-容器无法启动？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置https之后，seafile-容器无法启动？"}},[e._v("#")]),e._v(" 设置HTTPS之后，Seafile 容器无法启动？")]),e._v(" "),s("p",[e._v("先运行 "),s("code",[e._v("sudo docker logs seafile")]),e._v(" 查看日志文件，然后根据日志逐步排查错误")]),e._v(" "),s("h4",{attrs:{id:"没有域名是否可以设置-seafile-https？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#没有域名是否可以设置-seafile-https？"}},[e._v("#")]),e._v(" 没有域名是否可以设置 Seafile HTTPS？")]),e._v(" "),s("p",[e._v("不可以，即如果 SEAFILE_SERVER_HOSTNAME 处设置为IP地址，会导致 Seafile 无法启动")])])}),[],!1,null,null,null);t.default=i.exports}}]);