(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{225:function(r,t,e){"use strict";e.r(t);var a=e(28),s=Object(a.a)({},(function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[e("h1",{attrs:{id:"docker速学"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker速学"}},[r._v("#")]),r._v(" Docker速学")]),r._v(" "),e("h2",{attrs:{id:"操作系统视角看docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作系统视角看docker"}},[r._v("#")]),r._v(" 操作系统视角看Docker")]),r._v(" "),e("p",[r._v("Docker是用来运行应用程序的，而应用程序必须在操作系统上运行，这个基本原理是无法改变的。因此一个Docker实例（Container）是包含一个简易的Linux或Windows操作系统。")]),r._v(" "),e("blockquote",[e("p",[r._v("可以说，Container=运行时操作系统+应用软件（含依赖组件）。如果从操作系统视角看Container就更加便于理解Container。")])]),r._v(" "),e("h2",{attrs:{id:"网络和端口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#网络和端口"}},[r._v("#")]),r._v(" 网络和端口")]),r._v(" "),e("p",[r._v("容器不是用来看的，是需要被外界访问或其他应用程序调用的，理解容器的网络机制就很有必要的。")]),r._v(" "),e("h3",{attrs:{id:"内网地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内网地址"}},[r._v("#")]),r._v(" 内网地址")]),r._v(" "),e("p",[r._v("对于Docker系统来说，默认有一个容器路由功能，简单的说，Docker会给每个部署好的Container生成一个内网IP地址。例如，Docker下运行了容器，Docker就自动分配了3个内网地址：")]),r._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[r._v("容器1 172.18.0.1\n容器2 172.18.0.2\n容器3 172.18.0.23\n")])])]),e("p",[r._v("对于其中任何Container来说，都可以通过IP地址作为访问通道")]),r._v(" "),e("h3",{attrs:{id:"端口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#端口"}},[r._v("#")]),r._v(" 端口")]),r._v(" "),e("p",[r._v("每个Container，都可以映射到服务器的一个端口上，以便于外部访问这个Container。\n例如：172.18.0.1 上运行了MySQL，且MySQL本身开启了外部访问。这个时候，如何通过服务器的IP地址来访问这个MySQL呢？")]),r._v(" "),e("ol",[e("li",[e("p",[r._v("首先，将容器1的做一个端口映射，加入映射到都服务器的3306端口")])]),r._v(" "),e("li",[e("p",[r._v("然后，通过 服务器IP:3306 就可以访问MySQL")])])]),r._v(" "),e("p",[r._v("问题：Container中的应用为什么有端口号？Container是带最简的操作系统的，有操作系统就一定会通过端口访问程序")]),r._v(" "),e("h2",{attrs:{id:"镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像"}},[r._v("#")]),r._v(" 镜像")]),r._v(" "),e("p",[r._v("对于Docker来说，镜像（Image）就是一个打包好了的文件包，这个文件包可以直接在Docker中部署，部署之后就产生了一个容器（Container）")]),r._v(" "),e("blockquote",[e("p",[r._v("例如：MySQL镜像=Linux操作系统+MySQL软件+可设置的配置参数")])]),r._v(" "),e("p",[r._v("故，一个镜像在部署的时候，是需要用户给可配置的参数赋值的。那这些参数在哪里？怎么设置？这个需要查看MySQL镜像对应的技术文档。")]),r._v(" "),e("h3",{attrs:{id:"镜像是怎么制作出来的？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像是怎么制作出来的？"}},[r._v("#")]),r._v(" 镜像是怎么制作出来的？")]),r._v(" "),e("p",[r._v("简单的说将DockerFile通过build命令跑一下，就生成了一个镜像")]),r._v(" "),e("h3",{attrs:{id:"镜像是一个单独的大文件还是一序列文件集合？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像是一个单独的大文件还是一序列文件集合？"}},[r._v("#")]),r._v(" 镜像是一个单独的大文件还是一序列文件集合？")]),r._v(" "),e("p",[r._v("镜像简单理解是一个文件夹，但也可以制作成压缩包")]),r._v(" "),e("ul",[e("li",[r._v("docker save是将一个镜像导出成一个tarball文件，对应的导入命令是docker load，将该文件导入成一个镜像。")]),r._v(" "),e("li",[r._v("docker export是将一个容器导出成一个tarball文件，对应的导入命令时docker import，将该文件导入成一个镜像（注意不是容器）。")])]),r._v(" "),e("blockquote",[e("p",[r._v("从功能上讲，docker export相当于commit ＋save，先将容器commit成镜像，再save成文件。")])]),r._v(" "),e("h3",{attrs:{id:"镜像仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像仓库"}},[r._v("#")]),r._v(" 镜像仓库")]),r._v(" "),e("p",[r._v("顾名思义，镜像仓库就是大量镜像集中存放的地方。最大的镜像仓库是Docker公司的Dockerhub，另外各个Docker主机提供商（阿里云、华为云等）也会提供镜像仓库服务，供客户存放自己的私有镜像。")]),r._v(" "),e("h2",{attrs:{id:"数据固定存储"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据固定存储"}},[r._v("#")]),r._v(" 数据固定存储")]),r._v(" "),e("p",[r._v("由于容器是运行时，那么用户一定会思考一个问题：“容器运行过程产生了一些需要长期保存的数据，一旦停止或销毁，所有产生的数据就会消失。怎么办？” 以运行WordPress为例，WordPress的wp-content是需要保留数据库的文件夹，如果在容器下运行，如何保存呢？")]),r._v(" "),e("p",[r._v("其实Docker考虑这种场景，Docker可以给容器“挂载”一个固定的外部存储空间，这个存储空间是服务器操作系统来管理的。")]),r._v(" "),e("p",[r._v("以WordPress为例，Docker处理长期数据保存的机制如下：")]),r._v(" "),e("ol",[e("li",[r._v("容器运行之前，给wp-content映射到一个Docker之外的固定存储路径")]),r._v(" "),e("li",[r._v("运行容器，wp-content的数据就会保存下来")])]),r._v(" "),e("h2",{attrs:{id:"常见命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见命令"}},[r._v("#")]),r._v(" 常见命令")]),r._v(" "),e("p",[r._v("下面是使用Docker可能需要用到的常见命令")]),r._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[r._v("systemctl start/stop docker     运行/停止 docker 服务\nsystemctl enable docker         使 docker 开机自启\ndocker pull                     从镜像库拉取容器镜像\ndocker ps                       查看正在运行的容器列表（可以看到容器ID，所映射的端口号等等）\ndocker ps -a                    查看所有的容器（不管是否运行都能看到）\ndocker start/stop CONTAINER ID  开始/停止容器（CONTAINER ID 是容器的ID）            \ndocker rm CONTAINER ID          删除容器\ndocker kill CONTAINER ID        直接关闭容器\ndocker images  # 查询已下载镜像\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);