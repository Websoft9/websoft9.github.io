<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OwnCloud migrate to data disk | Linux Guide</title>
    <meta name="description" content="This document is a summary of Linux-related operations, commands, and scripts in Websoft9 to help cloud computing users quickly master Linux-related skills.">
    
    
    <link rel="preload" href="/docs/linux/assets/css/0.styles.576d3c71.css" as="style"><link rel="preload" href="/docs/linux/assets/js/app.48f37ed0.js" as="script"><link rel="preload" href="/docs/linux/assets/js/2.a9bd2ee6.js" as="script"><link rel="preload" href="/docs/linux/assets/js/16.6ef86aac.js" as="script"><link rel="prefetch" href="/docs/linux/assets/js/10.791b4411.js"><link rel="prefetch" href="/docs/linux/assets/js/11.9696eab8.js"><link rel="prefetch" href="/docs/linux/assets/js/12.dff6f555.js"><link rel="prefetch" href="/docs/linux/assets/js/13.d7f1b65f.js"><link rel="prefetch" href="/docs/linux/assets/js/14.37da406c.js"><link rel="prefetch" href="/docs/linux/assets/js/15.41f5651a.js"><link rel="prefetch" href="/docs/linux/assets/js/17.21a739cd.js"><link rel="prefetch" href="/docs/linux/assets/js/18.0412d76b.js"><link rel="prefetch" href="/docs/linux/assets/js/19.63a14502.js"><link rel="prefetch" href="/docs/linux/assets/js/20.04547f0f.js"><link rel="prefetch" href="/docs/linux/assets/js/21.b4f668d7.js"><link rel="prefetch" href="/docs/linux/assets/js/22.b0dda090.js"><link rel="prefetch" href="/docs/linux/assets/js/23.77693977.js"><link rel="prefetch" href="/docs/linux/assets/js/24.45ce71b7.js"><link rel="prefetch" href="/docs/linux/assets/js/25.009dc11e.js"><link rel="prefetch" href="/docs/linux/assets/js/26.1067d879.js"><link rel="prefetch" href="/docs/linux/assets/js/27.f8f55ba8.js"><link rel="prefetch" href="/docs/linux/assets/js/28.a4ae1f71.js"><link rel="prefetch" href="/docs/linux/assets/js/29.15b07f56.js"><link rel="prefetch" href="/docs/linux/assets/js/3.e4995471.js"><link rel="prefetch" href="/docs/linux/assets/js/30.e1ead696.js"><link rel="prefetch" href="/docs/linux/assets/js/31.27da4c50.js"><link rel="prefetch" href="/docs/linux/assets/js/32.19d5aa51.js"><link rel="prefetch" href="/docs/linux/assets/js/33.337ef883.js"><link rel="prefetch" href="/docs/linux/assets/js/34.07716de7.js"><link rel="prefetch" href="/docs/linux/assets/js/35.f1d5cd32.js"><link rel="prefetch" href="/docs/linux/assets/js/36.d5a72bec.js"><link rel="prefetch" href="/docs/linux/assets/js/37.9e866e81.js"><link rel="prefetch" href="/docs/linux/assets/js/38.b60969ee.js"><link rel="prefetch" href="/docs/linux/assets/js/39.bb7ed267.js"><link rel="prefetch" href="/docs/linux/assets/js/4.b72cfc44.js"><link rel="prefetch" href="/docs/linux/assets/js/40.40200be6.js"><link rel="prefetch" href="/docs/linux/assets/js/41.bb81c3f3.js"><link rel="prefetch" href="/docs/linux/assets/js/42.bc3e32e3.js"><link rel="prefetch" href="/docs/linux/assets/js/43.9cc5a092.js"><link rel="prefetch" href="/docs/linux/assets/js/5.fb31e38a.js"><link rel="prefetch" href="/docs/linux/assets/js/6.d7b88183.js"><link rel="prefetch" href="/docs/linux/assets/js/7.ceb78735.js"><link rel="prefetch" href="/docs/linux/assets/js/8.29efdddf.js"><link rel="prefetch" href="/docs/linux/assets/js/9.c6561b73.js">
    <link rel="stylesheet" href="/docs/linux/assets/css/0.styles.576d3c71.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/linux/" class="home-link router-link-active"><!----> <span class="site-name">Linux Guide</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/linux/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://support.websoft9.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/linux/solution-migration.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/linux/zh/solution-migration.html" class="nav-link">中文</a></li></ul></div></div> <a href="https://github.com/Websoft9/linux" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/linux/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://support.websoft9.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/linux/solution-migration.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/linux/zh/solution-migration.html" class="nav-link">中文</a></li></ul></div></div> <a href="https://github.com/Websoft9/linux" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/linux/" class="sidebar-link">Overview</a></li><li><a href="/docs/linux/admin-desktop.html" class="sidebar-link">Desktop</a></li><li><a href="/docs/linux/admin-panel.html" class="sidebar-link">Control Panels</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="owncloud-migrate-to-data-disk"><a href="#owncloud-migrate-to-data-disk" aria-hidden="true" class="header-anchor">#</a> OwnCloud migrate to data disk</h1> <p>OwnCloud is installed in the system disk default,if there not enough storage space for this disk,you must delete unused files or add data disk for OwnCloud,then migrate all data to data disk</p> <blockquote><p>Be sure to make a snapshot backup before migrating data, otherwise the consequences of the migration will be unimaginable.</p></blockquote> <p>To migrate to the data disk, we offer two options:</p> <p><a name="38c5814d"></a></p> <h3 id="solution1-change-the-storage-path-of-owncloud-to-the-data-disk"><a href="#solution1-change-the-storage-path-of-owncloud-to-the-data-disk" aria-hidden="true" class="header-anchor">#</a> Solution1:Change the storage path of OwnCloud to the data disk</h3> <p>OwnCloud's document data is stored by default to: /data/wwwroot/owncloud/data. This solution implements the target by adding a directory (corresponding to the data disk) under OwnCloud and then modifying the default storage path. The specific operations are as follows:</p> <ol><li>Buy the data disk in advance, and then go to the cloud vendor console to do a data disk mount to the server</li> <li>Stop the Apache Service</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>systemctl stop httpd
</code></pre></div><ol><li>Create a new folder in the /data/wwwroot/owncloud directory via the SFTP tool. The name suggests: bigdata，this bigdata folder is the default document storage location after migration.</li> <li>Mount the data disk to: <em>/data/wwwroot/owncloud/bigdata</em></li> <li>Copy or Cut <em>owncloud/data</em>  to <em>owncloud/bigdata</em></li></ol> <blockquote><p>If the data is large, clipping or copying may fail.</p></blockquote> <ol><li>Modify the data storage directory location in the Owncloud configuration file(<em>/data/wwwroot/owncloud/config</em>)</li> <li>Enable the Apache Service</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>systemctl start httpd
</code></pre></div><p><a name="b512eb42"></a></p> <h3 id="solution2-transfer-the-server-s-data-directory-to-the-data-disk"><a href="#solution2-transfer-the-server-s-data-directory-to-the-data-disk" aria-hidden="true" class="header-anchor">#</a> Solution2:Transfer the server's /data directory to the data disk</h3> <p>This scenario will transfer all the sites (including OwnCloud) and databases on the server to the data disk.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Websoft9/linux/edit/master/docs/solution-migration.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/linux/assets/js/app.48f37ed0.js" defer></script><script src="/docs/linux/assets/js/2.a9bd2ee6.js" defer></script><script src="/docs/linux/assets/js/16.6ef86aac.js" defer></script>
  </body>
</html>
