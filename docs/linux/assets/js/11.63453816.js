(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{330:function(t,e,a){"use strict";a.r(e);var r=a(33),n=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"包和仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#包和仓库"}},[t._v("#")]),t._v(" 包和仓库")]),t._v(" "),a("p",[t._v("Linux生态中的软件包资源非常丰富，从某种程度上看，用户是否熟练的下载安装以及更新这些包，决定了能够为所在的企业创作的价值的大小。")]),t._v(" "),a("p",[t._v("除了传统的下载源码在编译的软件包安装方案之外，Linux 操作系统都提供了一个集中的软件包管理机制，即搜索、安装和管理软件包。 Linux 软件包的基本组成部分通常有：共享库、应用程序（二进制）、服务和文档。从另外一个角度看，包文件通常包含编译好的二进制文件和其它资源组成的：软件、安装脚本、元数据及其所需的依赖列表。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/zh/linux/linux-rpms-websoft9.png",alt:""}})]),t._v(" "),a("p",[t._v("包管理通常不仅限于软件的一次性安装，还包括了对已安装软件包进行升级的工具。")]),t._v(" "),a("ul",[a("li",[t._v("包：被安装到本地服务器的软件安装包，例如Apache安装包")]),t._v(" "),a("li",[t._v("包缓存：安装软件时在本地保存的临时文件，通常存储在 "),a("em",[t._v("/var/cache/yum")]),t._v(" 目录下")]),t._v(" "),a("li",[t._v("仓库：存放多个软件包的一个远端服务器")]),t._v(" "),a("li",[t._v("仓库地址：用于访问仓库的网址")]),t._v(" "),a("li",[t._v("本地安装包缓存：本地已经下载的软件缓存，通常存储在 "),a("em",[t._v("/var/lib/rpm")]),t._v(" 目录下，可以通过 "),a("code",[t._v("rpm -")])]),t._v(" "),a("li",[t._v("本地存储的软件清单：从仓库下载所有的软件清单并存在在本地，可以通过"),a("code",[t._v("yum list")]),t._v("检索")])]),t._v(" "),a("p",[t._v("本章主要讨论和研究Linux系统的包管理机制、实践方案。")]),t._v(" "),a("h2",{attrs:{id:"仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#仓库"}},[t._v("#")]),t._v(" 仓库")]),t._v(" "),a("p",[t._v("多个软件包存储在一个集中位置，就称之为仓库「repository」，这种以仓库方式集中存放，有利于软件开发者或包维护者进行管理。")]),t._v(" "),a("p",[t._v("仓库的网址，称之为仓库地址，专业术语叫”源”。")]),t._v(" "),a("p",[t._v("互联网上有大量的源，比如Redhat官方的源，也有云厂家提供的源。在配置 Linux 服务器或开发环境时，通常都不仅限于使用官方源。相较于现如今软件版本快速更新迭代而言，系统管理员和开发人员掌握常见 Linux 包管理基本操作还是一项必备的常用技能。")]),t._v(" "),a("p",[t._v("以上内容主要来源"),a("a",{attrs:{href:"https://www.sysgeek.cn/linux-package-management/",target:"_blank",rel:"noopener noreferrer"}},[t._v("此处"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"仓库源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#仓库源"}},[t._v("#")]),t._v(" 仓库源")]),t._v(" "),a("p",[t._v("下面我们列出全球比较流行的仓库：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("地址")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("概要")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("RPM Fusion")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("https://rpmfusion.org/")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("RPM Fusion provides software that the Fedora Project or Red Hat doesn't want to ship. That software is provided as precompiled RPMs for all current Fedora versions and current Red Hat Enterprise Linux or clones versions;")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("EPEL")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("https://fedoraproject.org/wiki/EPEL")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("EPEL (Extra Packages for Enterprise Linux), 是由 Fedora Special Interest Group 维护的 Enterprise Linux（RHEL、CentOS）中经常用到的包。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("RepoForge")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("http://repoforge.org/")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Repoforge 是 RHEL 系统下的软件仓库，拥有 10000 多个软件包，被认为是最安全、最稳定的一个软件仓库。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Remi")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("https://www.remi.com")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Remi repository 是包含最新版本 PHP 和 MySQL 包的 Linux 源，由 Remi 提供维护。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("PackMan")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("http://packman.links2linux.org/")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Packman 是 OpenSUSE 最大的第三方软件源，主要为 OpenSUSE 提供额外的软件包，包括音视频解码器、多媒体应用、游戏等。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Dotdeb")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("http://www.debian.org/")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Dotdeb is an extra repository providing up-to-date packages for your Debian 8 “Jessie” servers .")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Gentoo portage")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("https://www.gentoo.org")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Gentoo Portage 软件源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Fedora altarch")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("https://archives.fedoraproject.org/pub/")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Fedora altarch 是 Fedora Linux 额外平台的安装镜像和官方软件包仓库。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Ubuntu Ports")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("http://ports.ubuntu.com")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Ubuntu Ports 是 Arm64，Armhf 等平台的 Ubuntu 软件仓库")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Centos altarch")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("http://mirror.centos.org/altarch/")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("CentOS 额外平台的安装镜像和官方软件包仓库")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("IUS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("https://ius.io/")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("IUS（Inline with Upstream Stable）是一个社区项目，它旨在为 Linux 企业发行版提供可选软件的最新版 RPM 软件包。")])])])]),t._v(" "),a("p",[t._v('以上是"大卖场"式的仓库源，实际上很多知名的开源软件，例如：MySQL,Apache等还提供自建的仓库，供用户使用。')]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://dev.mysql.com/downloads/repo/yum/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL repo"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://nginx.org/en/linux_packages.html#RHEL-CentOS",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx repo"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("下图是MySQL官方的仓库文件下载页面，"),a("em",[t._v("mysql80-community-release-el8-1.noarch.rpm")]),t._v("这种文件就是用户安装仓库地址的rpm包。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/zh/linux/repo-mysql-websoft9.png",alt:"repo mysql"}})]),t._v(" "),a("h3",{attrs:{id:"安装仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装仓库"}},[t._v("#")]),t._v(" 安装仓库")]),t._v(" "),a("p",[t._v("安装仓库通俗的讲，就是将仓库的网址（地址）信息写入到服务器的指定文件夹（文件）中。类似我们为了方便自己购物，将不同的购物网站的网站收藏到浏览器是一个道理。")]),t._v(" "),a("ul",[a("li",[t._v("CentOS仓库网址存放地：/etc/yum.repos.d")]),t._v(" "),a("li",[t._v("Ubuntu仓库网址存放地：/etc/apt/sources.list")])]),t._v(" "),a("p",[t._v("以CentOS仓库为例，查看 "),a("em",[t._v("/etc/yum.repos.d")]),t._v(" 目录，我们会发现下面有几个以 repo 结尾的文件")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/zh/linux/repo-list-websoft9.png",alt:""}})]),t._v(" "),a("p",[t._v("打开每个.repo文件，你会看到其中的主要信息就是网址")]),t._v(" "),a("p",[t._v("那这些.repo文件是如何被安装的呢？主要有如下几种方式：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#1 yum 安装\nyum install epel-release\n\n#2 下载 RPM包安装\n\nwget -O /etc/yum.repos.d/epel.repo https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nrpm -i epel-release-latest-7.noarch.rpm\n\n#3 直接在 /etc/yum.repos.d 新增一个.repo文件，内容如下\n\n[rpmfusion-free]\nname=RPM Fusion for Fedora $releasever - Free\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/rpmfusion/free/fedora/releases/$releasever/Everything/$basearch/os/\nmirrorlist=http://mirrors.rpmfusion.org/mirrorlist?repo=free-fedora-$releasever&arch=$basearch\nenabled=1\nmetadata_expire=7d\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmfusion-free-fedora-$releasever-$basearch\n\n[rpmfusion-free-debuginfo]\nname=RPM Fusion for Fedora $releasever - Free - Debug\nmirrorlist=http://mirrors.rpmfusion.org/mirrorlist?repo=free-fedora-debug-$releasever&arch=$basearch\nenabled=0\nmetadata_expire=7d\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmfusion-free-fedora-$releasever-$basearch\n\n[rpmfusion-free-source]\nname=RPM Fusion for Fedora $releasever - Free - Source\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/rpmfusion/free/fedora/releases/$releasever/Everything/source/SRPMS/\nmirrorlist=http://mirrors.rpmfusion.org/mirrorlist?repo=free-fedora-source-$releasever&arch=$basearch\nenabled=0\nmetadata_expire=7d\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmfusion-free-fedora-$releasever-$basearch\n")])])]),a("p",[t._v("我们知道仓库网址上有一个特殊的"),a("strong",[t._v("数据库")]),t._v("文件（软件列表），这个文件记录这个网址所提供的所有安装包，有的仓库只有少数几个安装包，有的仓库提供成千上万个安装包。")]),t._v(" "),a("p",[t._v("同时本地也有一个"),a("strong",[t._v("数据库")]),t._v("文件（RPM 数据库 ），它记录本地已经安装的软件包名称、版本、来源等信息。当用户使用yum安装软件的时候，本地就会到仓库中下载软件列表，通过与本地的RPM数据库做对比，然后决定是否安装或提示已经存在无需安装。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/zh/linux/installwithyum-websoft9.jpg",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"自建仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自建仓库"}},[t._v("#")]),t._v(" 自建仓库")]),t._v(" "),a("p",[t._v("在安装MySQL的时候，我们就发现，MySQL官方提供了自己的仓库以供用户使用。也就意味着，仓库是可以自行建设的。")]),t._v(" "),a("p",[t._v("参考："),a("a",{attrs:{href:"https://www.runoob.com/linux/linux-yum.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("《配置本地Yum仓库》"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"管理包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#管理包"}},[t._v("#")]),t._v(" 管理包")]),t._v(" "),a("p",[t._v("虽然大多数流行的 Linux 发行版在包管理工具、方式和形式都大同小异，但却还是有平台差异：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("系统")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("格式")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("工具")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Debian")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v(".deb")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("apt, apt-cache、apt-get、dpkg")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Ubuntu")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v(".deb")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("apt、apt-cache、apt-get、dpkg")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CentOS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v(".rpm")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yum")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Fedora")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v(".rpm")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("dnf")])])])]),t._v(" "),a("p",[t._v("下图是典型的deb包组成部分：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/zh/linux/DEB-Package-Format.png",alt:""}})]),t._v(" "),a("p",[t._v("Debian 及其衍生产品如：Ubuntu、Linux Mint 和 Raspbian 的包格式为.deb文件，apt 是最常见包操作命令，可：搜索库、安装包及其依赖和管理升级。而要直接安装现成.deb包时需要使用dpkg命令。")]),t._v(" "),a("p",[t._v("CentOS、Fedora 及 Red Hat 系列 Linux 使用RPM包文件，并使用yum命令管理包文件及与软件库交互。")]),t._v(" "),a("p",[t._v("在最新的 Fedora 版本中，yum命令已被dnf取代进行包管理。")]),t._v(" "),a("h3",{attrs:{id:"更新本地数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新本地数据库"}},[t._v("#")]),t._v(" 更新本地数据库")]),t._v(" "),a("p",[t._v("大多数 Linux 都使用本地数据库来存储远程可用的包仓库列表，所以在安装或升级包之前最好更新（同步）一下这个数据库。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("系统")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("命令")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Debian / Ubuntu")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo apt-get update")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CentOS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yum check-update")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Fedora")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("dnf check-update")])])])]),t._v(" "),a("h3",{attrs:{id:"升级已安装的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级已安装的包"}},[t._v("#")]),t._v(" 升级已安装的包")]),t._v(" "),a("p",[t._v("在没有包管理方式时，要升级并保持 Linux 已装软件处在最新版本上是一个巨大的工程，管理员和用户不得不手动跟踪上游软件版本变化及安全警告。在有了包管理系统之后，只需几条命令便可保持软件最新。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("系统")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Debian / Ubuntu")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo apt-get upgrade")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("仅升级已安装的软件包")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo apt-get dist-upgrade")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可添加或删除程序包，以满足新的依赖。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CentOS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo yum update")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Fedora")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo dnf upgrade")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})])])]),t._v(" "),a("h3",{attrs:{id:"查找-搜索软件包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查找-搜索软件包"}},[t._v("#")]),t._v(" 查找/搜索软件包")]),t._v(" "),a("p",[t._v("大多数 Linux 桌面版本都提供用户可搜索和安装软包的界面，这是找寻和安装软件的最佳方法。但对于追求效率和服务器管理员来说，使用命令行工具查找/搜索软件包才是正途。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("系统")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Debian / Ubuntu")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("apt-cache search 搜索内容")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CentOS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yum search 搜索内容")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yum search all 搜索内容")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("搜索所有内容，包括包描述。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Fedora")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("dnf search 搜索内容")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("dnf search all 搜索内容")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("搜索所有内容，包括包描述。")])])])]),t._v(" "),a("h3",{attrs:{id:"查看某个软件包信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看某个软件包信息"}},[t._v("#")]),t._v(" 查看某个软件包信息")]),t._v(" "),a("p",[t._v("在决定安装哪个包之前，我们往往都需要查看该软件包的详细说明。包的说明文件中通常包括：包名、版本号及依赖列表等元数据，可以使用如下命令来查看。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("系统")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Debian / Ubuntu")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("apt-cache show 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("显示有关软件包的本地缓存信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("dpkg -s 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("显示包的当前安装状态")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CentOS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yum info 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yum deplist 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("列出包的以来")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Fedora")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("dnf info 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("dnf repoquery –requires 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("列出包的以来")])])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[root@iZ8vb7it5p19lxxol367u0Z rpm]# rpm -qi rabbitmq-server\nName        : rabbitmq-server\nVersion     : 3.8.3\nRelease     : 1.el7\nArchitecture: noarch\nInstall Date: Sat 11 Apr 2020 03:16:18 PM CST\nGroup       : Development/Libraries\nSize        : 14010653\nLicense     : MPLv1.1 and MIT and ASL 2.0 and BSD\nSignature   : RSA/SHA256, Mon 09 Mar 2020 11:24:36 PM CST, Key ID 6b73a36e6026dfca\nSource RPM  : rabbitmq-server-3.8.3-1.el7.src.rpm\nBuild Date  : Mon 09 Mar 2020 11:24:34 PM CST\nBuild Host  : b0cb34e7-576c-46ec-669f-7b518b2352e1\nRelocations : (not relocatable)\nURL         : https://www.rabbitmq.com/\nSummary     : The RabbitMQ server\nDescription :\nRabbitMQ is an open source multi-protocol messaging broker.\n\n\n\n[root@iZ8vb7it5p19lxxol367u0Z rpm]# yum info rabbitmq-server\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\nInstalled Packages\nName        : rabbitmq-server\nArch        : noarch\nVersion     : 3.8.3\nRelease     : 1.el7\nSize        : 13 M\nRepo        : installed\nFrom repo   : rabbitmq_rabbitmq-server\nSummary     : The RabbitMQ server\nURL         : https://www.rabbitmq.com/\nLicense     : MPLv1.1 and MIT and ASL 2.0 and BSD\nDescription : RabbitMQ is an open source multi-protocol messaging broker.\n")])])]),a("h3",{attrs:{id:"从软件仓库安装包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从软件仓库安装包"}},[t._v("#")]),t._v(" 从软件仓库安装包")]),t._v(" "),a("p",[t._v("一旦我们知道某个软件包的名称之后，便可以使用如下命令从软件仓库安装包。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("系统")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Debian / Ubuntu")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo apt-get install 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo apt-get install 包1 包2 …")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("安装所有列出的包")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo apt-get install -y 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("无需提示直接安装")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CentOS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo yum install 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo yum install 包1 包2 …")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("安装所有列出的包")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo yum install -y 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("无需提示直接安装")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Fedora")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo dnf install 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo dnf install 包1 包2 …")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("安装所有列出的包")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo dnf install -y 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("无需提示直接安装")])])])]),t._v(" "),a("h3",{attrs:{id:"从本地文件系统直接安装包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从本地文件系统直接安装包"}},[t._v("#")]),t._v(" 从本地文件系统直接安装包")]),t._v(" "),a("p",[t._v("很多时候，我们在进行测试或从某个地方直接拿到软件包之后需要从本地文件系统直接安装包。Debian 及衍生系统可以使用 "),a("strong",[t._v("dpkg")]),t._v(" 进行安装，CentOS 和 Fedora 系统使用 "),a("strong",[t._v("yum")]),t._v(" 和 "),a("strong",[t._v("dnf")]),t._v(" 命令进行安装。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("系统")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Debian / Ubuntu")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo dpkg -i 包名.deb")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo apt-get install -y gdebi&& sudo gdebi 包名.deb")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("使用gdebi检索缺少的依赖关系")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CentOS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo yum install 包名.rpm")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Fedora")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo dnf install 包名.rpm")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})])])]),t._v(" "),a("h3",{attrs:{id:"移除已安装的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移除已安装的包"}},[t._v("#")]),t._v(" 移除已安装的包")]),t._v(" "),a("p",[t._v("包管理器知道哪些文件是由哪个包提供的，所以卸载不需要的软件包之后可以获得一个干净的系统。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("系统")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Debian / Ubuntu")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo apt-get remove 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo apt-get autoremove")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("自动移除已知不需要的包")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CentOS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo yum remove 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Fedora")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sudo dnf erase 包名")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})])])]),t._v(" "),a("h3",{attrs:{id:"锁定软件包版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#锁定软件包版本"}},[t._v("#")]),t._v(" 锁定软件包版本")]),t._v(" "),a("p",[t._v("有些时候，我们在对系统进行更新操作时，不需要对某些软件包进行升级操作，要把该包锁定在某个特定版本下。这个时候我们就需要用到相关的插件，以yum为例：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install yum-plugin-versionlock\n")])])]),a("p",[t._v("安装 "),a("strong",[t._v("yum-plugin-versionlock")]),t._v(" 之后，系统新增一个配置文件："),a("em",[t._v("/etc/yum/pluginconf.d/versionlock.list")])]),t._v(" "),a("p",[t._v("可以直接编辑此文件，往其中添加锁定项，也可以通过下面的命令添加锁定项")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum versionlock gcc-*\n\n")])])]),a("p",[t._v("上述配置不允许将gcc软件包升级到大于执行锁定时安装的软件包的版本。")]),t._v(" "),a("h2",{attrs:{id:"制作包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#制作包"}},[t._v("#")]),t._v(" 制作包")]),t._v(" "),a("p",[t._v("包文件是如何制作并发布到包仓库的呢？")]),t._v(" "),a("h2",{attrs:{id:"工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工具"}},[t._v("#")]),t._v(" 工具")]),t._v(" "),a("p",[t._v("在云计算发展的今天，包管理丰富多彩。在实践中，有一些非常好用好玩的工具：")]),t._v(" "),a("ul",[a("li",[t._v("packagecloud.io: 提供包管理托管的网站，范例参考："),a("a",{attrs:{href:"https://packagecloud.io/rabbitmq/rabbitmq-server/",target:"_blank",rel:"noopener noreferrer"}},[t._v("RabbitMQ on packagecloud"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("https://bintray.com/")])]),t._v(" "),a("h2",{attrs:{id:"常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),a("h4",{attrs:{id:"下载的rpm包中可否包含其他rpm包的依赖地址？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载的rpm包中可否包含其他rpm包的依赖地址？"}},[t._v("#")]),t._v(" 下载的RPM包中可否包含其他RPM包的依赖地址？")]),t._v(" "),a("p",[t._v("可以，这是很常见的场景")]),t._v(" "),a("h4",{attrs:{id:"rpm-t-×××-rpm-和yum-install-×××-rpm-安装命令有什么区别？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpm-t-×××-rpm-和yum-install-×××-rpm-安装命令有什么区别？"}},[t._v("#")]),t._v(" rpm -t ×××.rpm 和yum install ×××.rpm 安装命令有什么区别？")]),t._v(" "),a("p",[t._v("rpm 安装只针对单个rpm文件安装，不会安装相关的依赖；yum install 安装会安装rpm包以及所需的依赖")]),t._v(" "),a("h4",{attrs:{id:"noarch-rpm-和-x64-64-rpm-包有什么区别？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#noarch-rpm-和-x64-64-rpm-包有什么区别？"}},[t._v("#")]),t._v(" .noarch.rpm 和 .x64_64.rpm 包有什么区别？")]),t._v(" "),a("p",[t._v(".noarch 是通用的rpm包，其中没有二进制文件和库文件，就是说与服务器硬件和操作系统版没有太大的关系，通常用于安装一个脚本或仓库地址"),a("br"),t._v("\n.x64_64 是包含二进制等文件的安装包，与服务器CPU类型有关，通常用于安装某个软件")]),t._v(" "),a("h4",{attrs:{id:"在两个仓库中存在通一个软件包，yum-apt如何处理其中的优先级关系？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在两个仓库中存在通一个软件包，yum-apt如何处理其中的优先级关系？"}},[t._v("#")]),t._v(" 在两个仓库中存在通一个软件包，yum/apt如何处理其中的优先级关系？")]),t._v(" "),a("p",[t._v("Linux 发行版比较多，同时还有很多个人或组织维护了某些特定用途的安装/升级源。Yum Priorities 插件可以用来强制保护源。它通过给各个源设定不同的优先级，使得系统管理员可以将某些源（比如 Linux 发行版的官方源）设定为最高优先级，从而保证系统的稳定性（同时也可能无法更新到其它源上提供的软件最新版本）。")]),t._v(" "),a("ol",[a("li",[t._v("安装优先级插件"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("rpm -q yum-priorities\n")])])])]),t._v(" "),a("li",[t._v("编辑 /etc/yum.repos.d/目录下的*.repo 文件来设置优先级"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[base]\nname=CentOS-$releasever – Base\nbaseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/\ngpgcheck=0\npriority=1\n")])])])])]),t._v(" "),a("h4",{attrs:{id:"本地的rpm-deb数据库中是否包含已安装的软件的仓库来源地址？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地的rpm-deb数据库中是否包含已安装的软件的仓库来源地址？"}},[t._v("#")]),t._v(" 本地的rpm/deb数据库中是否包含已安装的软件的仓库来源地址？")]),t._v(" "),a("h4",{attrs:{id:"如何查看软件所需的依赖？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何查看软件所需的依赖？"}},[t._v("#")]),t._v(" 如何查看软件所需的依赖？")]),t._v(" "),a("p",[t._v("以RabbitMQ为例，命令以及结果如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[root@iZ8vb7it5p19lxxol367u0Z rpm]# yum deplist rabbitmq-server\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\npackage: rabbitmq-server.noarch 3.8.3-1.el7\n  dependency: /bin/sh\n   provider: bash.x86_64 4.2.46-33.el7\n  dependency: /usr/bin/env\n   provider: coreutils.x86_64 8.22-24.el7\n  dependency: config(rabbitmq-server) = 3.8.3-1.el7\n   provider: rabbitmq-server.noarch 3.8.3-1.el7\n  dependency: erlang >= 21.3\n   provider: erlang.x86_64 22.3.2-1.el7\n  dependency: logrotate\n   provider: logrotate.x86_64 3.8.6-17.el7\n  dependency: socat\n   provider: socat.x86_64 1.7.3.2-2.el7\n  dependency: systemd\n   provider: systemd.x86_64 219-67.el7_7.4\n")])])]),a("blockquote",[a("p",[t._v("yum deplist 命令与被查询的软件包是否安装没有关系，即没有被安装的软件包也可以查询其依赖")])]),t._v(" "),a("h4",{attrs:{id:"yum-list-获取是软件清单是实时的还是缓存？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yum-list-获取是软件清单是实时的还是缓存？"}},[t._v("#")]),t._v(" yum list 获取是软件清单是实时的还是缓存？")])])}),[],!1,null,null,null);e.default=n.exports}}]);