<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>磁盘与文件 | Linux 实践指南</title>
    <meta name="description" content="本文档是Websoft9在实践中，总结的与Linux有关的操作、命令、脚本，帮助云计算用户快速掌握Linux相关的技能">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/docs/linux/favcon.ico">
    
    <link rel="preload" href="/docs/linux/assets/css/0.styles.c3977e2e.css" as="style"><link rel="preload" href="/docs/linux/assets/js/app.5babcefe.js" as="script"><link rel="preload" href="/docs/linux/assets/js/2.ea18336a.js" as="script"><link rel="preload" href="/docs/linux/assets/js/10.628f32fb.js" as="script"><link rel="prefetch" href="/docs/linux/assets/js/11.6da8baf3.js"><link rel="prefetch" href="/docs/linux/assets/js/12.920fc7d1.js"><link rel="prefetch" href="/docs/linux/assets/js/13.71ff1830.js"><link rel="prefetch" href="/docs/linux/assets/js/14.48b65e4b.js"><link rel="prefetch" href="/docs/linux/assets/js/15.6263dc56.js"><link rel="prefetch" href="/docs/linux/assets/js/16.c4cfa347.js"><link rel="prefetch" href="/docs/linux/assets/js/17.238d7a5a.js"><link rel="prefetch" href="/docs/linux/assets/js/18.22577d3c.js"><link rel="prefetch" href="/docs/linux/assets/js/19.9004e01a.js"><link rel="prefetch" href="/docs/linux/assets/js/20.e9ff589d.js"><link rel="prefetch" href="/docs/linux/assets/js/21.6ed8e85e.js"><link rel="prefetch" href="/docs/linux/assets/js/22.4df81e94.js"><link rel="prefetch" href="/docs/linux/assets/js/23.9f8dcaa8.js"><link rel="prefetch" href="/docs/linux/assets/js/24.e2b9ce84.js"><link rel="prefetch" href="/docs/linux/assets/js/25.5991a162.js"><link rel="prefetch" href="/docs/linux/assets/js/26.9ddd0c25.js"><link rel="prefetch" href="/docs/linux/assets/js/27.9912d7b2.js"><link rel="prefetch" href="/docs/linux/assets/js/28.f9ac0198.js"><link rel="prefetch" href="/docs/linux/assets/js/3.24edb1e2.js"><link rel="prefetch" href="/docs/linux/assets/js/4.411dd1b5.js"><link rel="prefetch" href="/docs/linux/assets/js/5.510a9407.js"><link rel="prefetch" href="/docs/linux/assets/js/6.06aa9940.js"><link rel="prefetch" href="/docs/linux/assets/js/7.ffa1085e.js"><link rel="prefetch" href="/docs/linux/assets/js/8.561bd282.js"><link rel="prefetch" href="/docs/linux/assets/js/9.c65a9498.js">
    <link rel="stylesheet" href="/docs/linux/assets/css/0.styles.c3977e2e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/linux/zh/" class="home-link router-link-active"><!----> <span class="site-name">Linux 实践指南</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/linux/zh/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://support.websoft9.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  支持
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/linux/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/docs/linux/zh/admin-file.html" class="nav-link router-link-exact-active router-link-active">
  中文
</a></li></ul></div></div> <a href="https://github.com/Websoft9/linux" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/linux/zh/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://support.websoft9.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  支持
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/linux/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/docs/linux/zh/admin-file.html" class="nav-link router-link-exact-active router-link-active">
  中文
</a></li></ul></div></div> <a href="https://github.com/Websoft9/linux" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>系统</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/linux/zh/" class="sidebar-link">关于</a></li><li><a href="/docs/linux/zh/admin-concept.html" class="sidebar-link">概念</a></li><li><a href="/docs/linux/zh/admin-desktop.html" class="sidebar-link">桌面</a></li><li><a href="/docs/linux/zh/admin-file.html" class="active sidebar-link">磁盘与文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#磁盘管理" class="sidebar-link">磁盘管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#分区" class="sidebar-link">分区</a></li><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#格式化" class="sidebar-link">格式化</a></li><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#挂载" class="sidebar-link">挂载</a></li><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#文件系统" class="sidebar-link">文件系统</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#文件管理" class="sidebar-link">文件管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#拥有者" class="sidebar-link">拥有者</a></li><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#权限" class="sidebar-link">权限</a></li><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#操作" class="sidebar-link">操作</a></li><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#目录" class="sidebar-link">目录</a></li><li class="sidebar-sub-header"><a href="/docs/linux/zh/admin-file.html#ftp" class="sidebar-link">FTP</a></li></ul></li></ul></li><li><a href="/docs/linux/zh/admin-user.html" class="sidebar-link">用户管理</a></li><li><a href="/docs/linux/zh/admin-package.html" class="sidebar-link">包和仓库</a></li><li><a href="/docs/linux/zh/admin-safe.html" class="sidebar-link">网络与安全</a></li><li><a href="/docs/linux/zh/admin-automation.html" class="sidebar-link">自动化运维</a></li><li><a href="/docs/linux/zh/admin-practices.html" class="sidebar-link">最佳实践</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>应用服务器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/linux/zh/webs-apache.html" class="sidebar-link">Apache</a></li><li><a href="/docs/linux/zh/webs-nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/docs/linux/zh/webs-tomcat.html" class="sidebar-link">Tomcat</a></li><li><a href="/docs/linux/zh/webs-caddy.html" class="sidebar-link">Caddy</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>程序开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/linux/zh/lang-php.html" class="sidebar-link">PHP</a></li><li><a href="/docs/linux/zh/lang-java.html" class="sidebar-link">Java</a></li><li><a href="/docs/linux/zh/lang-python.html" class="sidebar-link">Python</a></li><li><a href="/docs/linux/zh/lang-nodejs.html" class="sidebar-link">Node.js</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/linux/zh/else-faq.html" class="sidebar-link">FAQ</a></li><li><a href="/docs/linux/zh/else-troubleshooting.html" class="sidebar-link">故障处理</a></li><li><a href="/docs/linux/zh/else-glossary.html" class="sidebar-link">词汇表</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="磁盘与文件"><a href="#磁盘与文件" class="header-anchor">#</a> 磁盘与文件</h1> <h2 id="磁盘管理"><a href="#磁盘管理" class="header-anchor">#</a> 磁盘管理</h2> <h3 id="分区"><a href="#分区" class="header-anchor">#</a> 分区</h3> <p>磁盘分区就是将物理磁盘划分为多个逻辑区域，例如将一块SSD磁盘划分：sda1、sda2、sda3、sda4等4个分区。</p> <div class="language- extra-class"><pre class="language-text"><code>#查看磁盘分区
fdisk -l
</code></pre></div><h3 id="格式化"><a href="#格式化" class="header-anchor">#</a> 格式化</h3> <p>格式化指将磁盘分区格式化成不同的文件系统，以方便操作系统集中组织和管理文件。</p> <div class="language- extra-class"><pre class="language-text"><code>#将/dev下的 sda5 磁盘格式化为 ext2 的格式类型
mkfs.ext2 /dev/sda5
</code></pre></div><h3 id="挂载"><a href="#挂载" class="header-anchor">#</a> 挂载</h3> <p>对于Linux系统来说，挂载是将格式化后的分区与系统中的目录匹配起来，使得访问这个目录就相当于访问这个分区。</p> <div class="language- extra-class"><pre class="language-text"><code>#将 /dev/sda5 挂载到 test 中
mount /dev/sda5/test
</code></pre></div><h3 id="文件系统"><a href="#文件系统" class="header-anchor">#</a> 文件系统</h3> <p>Linux除支持Ext4文件系统外，还支持其他各种不同的文件系统，例如集群文件系统以及加密文件系统等。Linux将各种不同文件系统的操作和管理纳入到一个统一的框架中，使得用户程序可以通过同一个文件系统界面，也就是同一组系统调用，能够对各种不同的文件系统以及文件进行操作。这样，用户程序就可以不关心各种不同文件系统的实现细节，而使用系统提供的统一、抽象、虚拟的文件系统界面。这种统一的框架就是所谓的虚拟文件系统转换（Virtual Filesystem Switch），一般简称虚拟文件系统 (VFS)。虚拟文件系统描述如下所示：</p> <p><img src="https://libs.websoft9.com/Websoft9/DocsPicture/zh/linux/vfs-websoft9.png" alt=""></p> <p>Linux系统核心可以支持十多种文件系统类型，比如Btrfs、JFS、ReiserFS、ext、ext2、ext3、ext4、ISO9660、XFS、Minx、MSDOS、UMSDOS、VFAT、NTFS、HPFS、NFS、SMB、SysV、PROC等。</p> <div class="language- extra-class"><pre class="language-text"><code>#将系统内所有的文件系统列出来
df
Filesystem      1K-blocks      Used Available Use% Mounted on
/dev/hdc2         9920624   3823112   5585444  41% /
/dev/hdc3         4956316    141376   4559108   4% /home
/dev/hdc1          101086     11126     84741  12% /boot
tmpfs              371332         0    371332   0% /dev/shm

#将系统内的所有特殊文件格式及名称都列出来

df -aT
Filesystem    Type 1K-blocks    Used Available Use% Mounted on
/dev/hdc2     ext3   9920624 3823112   5585444  41% /
proc          proc         0       0         0   -  /proc
sysfs        sysfs         0       0         0   -  /sys
devpts      devpts         0       0         0   -  /dev/pts
/dev/hdc3     ext3   4956316  141376   4559108   4% /home
/dev/hdc1     ext3    101086   11126     84741  12% /boot
tmpfs        tmpfs    371332       0    371332   0% /dev/shm
none   binfmt_misc         0       0         0   -  /proc/sys/fs/binfmt_misc
sunrpc  rpc_pipefs         0       0         0   -  /var/lib/nfs/rpc_pipefs
</code></pre></div><h2 id="文件管理"><a href="#文件管理" class="header-anchor">#</a> 文件管理</h2> <h3 id="拥有者"><a href="#拥有者" class="header-anchor">#</a> 拥有者</h3> <p>规定文件只能被指定用户访问访问</p> <p>范例：</p> <div class="language- extra-class"><pre class="language-text"><code># 修改wwwroot文件夹所属的用户和用户组为nginx
chown -R nginx.nginx /data/wwwroot
</code></pre></div><h3 id="权限"><a href="#权限" class="header-anchor">#</a> 权限</h3> <p>Linux系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。</p> <p>范例：</p> <div class="language- extra-class"><pre class="language-text"><code># 分别修改文件和文件夹的读、写、执行权限
find /data/wwwroot/default -type f -exec chmod 640 {} \;
find /data/wwwroot/default -type d -exec chmod 750 {} \;
</code></pre></div><h3 id="操作"><a href="#操作" class="header-anchor">#</a> 操作</h3> <p>对文件典型操作包括：</p> <p>cp 拷贝文件和目录<br>
rm 移除文件或目录<br>
mv 移动文件与目录，或修改名称</p> <p>查看文件有多种命令：</p> <p>cat  由第一行开始显示文件内容<br>
tac  从最后一行开始显示<br>
nl   显示的时候，同时输出行号<br>
more 一页一页的显示文件内容<br>
less 一页一页的显示文件内容+往前翻页
head 只显示头几行<br>
tail 只显示尾几行</p> <h3 id="目录"><a href="#目录" class="header-anchor">#</a> 目录</h3> <p>接下来我们就来看几个常见的处理目录的命令吧：</p> <p>ls: 列出目录
cd：切换目录
pwd：显示目前的目录
mkdir：创建一个新的目录
rmdir：删除一个空的目录
cp: 复制文件或目录
rm: 移除文件或目录
mv: 移动文件与目录，或修改文件与目录的名称</p> <h3 id="ftp"><a href="#ftp" class="header-anchor">#</a> FTP</h3> <p>FTP就是文件传输协议。用于互联网双向传输，控制文件下载空间在服务器复制文件从本地计算机或本地上传文件复制到服务器上的空间。</p> <p><img src="https://libs.websoft9.com/Websoft9/DocsPicture/zh/linux/sftp-structure-websoft9.png" alt=""></p> <p>使用Linux，常见有SFTP和FTP两种文件传输模式。其中SFTP更为广泛，下面先介绍SFTP</p> <h4 id="sftp"><a href="#sftp" class="header-anchor">#</a> SFTP</h4> <p>SFTP 即 SSH File Transfer Protocol，又称之 Secret File Transfer Protocol。SFTP是使用SSH协议的FTP模式，也称之为安全增强型的FTP。SFTP工具是Linux用户最喜欢的一种操作方式，Linux系统默认支持SFTP（即免安装）</p> <p>下面以WinSCP这款SFTP工具为例，详细说明SFTP的使用。</p> <h5 id="配置winscp"><a href="#配置winscp" class="header-anchor">#</a> 配置WinSCP</h5> <ol><li>下载<a href="https://winscp.net/" target="_blank" rel="noopener noreferrer">WinSCP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，安装后，启动并新建一个连接</li> <li>根据云服务器的 <strong>密码验证和秘钥对</strong> 两种验证方式分别说明：
<ul><li>密码验证方式设置（最常见的方式）
<img src="http://libs.websoft9.com/Websoft9/DocsPicture/zh/winscp/winscp-newsite.png" alt="密码验证方式"></li> <li>秘钥对验证方式设置
<img src="http://libs.websoft9.com/Websoft9/DocsPicture/zh/winscp/winscp-secrets-websoft9.png" alt="秘钥对验证方式"></li></ul></li> <li>验证方式设置好之后，点击&quot;登录&quot;。登录中过程中，系统提示您是否保存登录信息，选择&quot;是&quot;</li> <li>成功连接后的界面
<img src="http://libs.websoft9.com/Websoft9/DocsPicture/zh/winscp/websoft9-winscp-success.png" alt="WinSCP管理界面"></li></ol> <h5 id="管理文件"><a href="#管理文件" class="header-anchor">#</a> 管理文件</h5> <p>WinSCP 通过拖拽，就可以方便上传下载文件，可以对文件（夹）可以对进行多种设置与操作</p> <ol><li><p>一般来说网站的文件都放在 <em>/data/wwwroot</em> 目录下夹
<img src="http://libs.websoft9.com/Websoft9/DocsPicture/en/winscp/winscp-dragfile-websoft9.png" alt="upload files"></p></li> <li><p>右键单击服务器上一个文件或文件夹，可以对云服务器进行多种操作
<img src="http://libs.websoft9.com/Websoft9/DocsPicture/zh/winscp/websoft9-winscp-youjian.png" alt="管理文件"></p></li> <li><p>以修改文件权限为例的相关界面如下</p> <p><img src="http://libs.websoft9.com/Websoft9/DocsPicture/zh/winscp/websoft9-winscp-quanxian.png" alt="管理文件"></p></li></ol> <h5 id="运行命令"><a href="#运行命令" class="header-anchor">#</a> 运行命令</h5> <p>WinSCP是自带命令运行功能的，虽然命令功能仅限于运行非交互式命名（即命令执行过程中无需反馈和过程中的输入），但对于初学者确简单实用。</p> <ol><li>WinSCP登录到服务器，点击菜单来的命令窗口图标（快捷键Ctrl+T也可以）
<img src="http://libs.websoft9.com/Websoft9/DocsPicture/zh/winscp/winscp-ucmd-websoft9.png" alt="命令行工具"></li> <li>在弹出的命令运行窗口执行命令（每次一条命令），以查询内存使用为例，运行命令 <code>free -m</code> <img src="http://libs.websoft9.com/Websoft9/DocsPicture/zh/winscp/wincp-showmemory-websoft9.png" alt="命令行工具"></li></ol> <h5 id="集成putty"><a href="#集成putty" class="header-anchor">#</a> 集成Putty</h5> <p>在某些特定的常见下，可能需要使用Putty来运行命令。由于Putty是一个命令操作界面，每次使用的时候都需要输入root密码，如果密码比较复杂，会让人感觉比较麻烦。其实WinSCP是可以集成Putty的，集成后，通过WinSCP就可以打开Putty，自动登录到服务器。</p> <ol><li>打开Winscp-选项-集成-应用程序。Putty/terminal客户端路径这里为你本地putty.exe程序的路径
<img src="http://libs.websoft9.com/Websoft9/DocsPicture/zh/winscp/websoft9-winscp-putty.png" alt="命令行工具"></li> <li>集成成功后，只需要通过Winscp的窗口快捷方式即可打开Putty
<img src="http://libs.websoft9.com/Websoft9/DocsPicture/zh/winscp/websoft9-winscp-puttyopen.png" alt="命令行工具"></li></ol> <blockquote><p>通过Winscp打开Putty操作与直接打开putty没有区别</p></blockquote> <h5 id="ftp-2"><a href="#ftp-2" class="header-anchor">#</a> FTP</h5> <p>Linux 系统默认情况下，并没有预制安装FTP。如果需要使用FTP，需要手工安装，具体步骤如下：</p> <ol><li><p>检查所属用户和属组
检查需要使用FTP上传目录的用户和用户组,假设上传目录为 <code>/data/wwwroot/default</code></p> <p>执行命令  <code>ls -l /data/wwwroot/</code>  查看  <code>default</code>  目录的用户和用户组,如下图所示</p> <p><img src="http://libs.websoft9.com/Websoft9/DocsPicture/zh/lamp/ftp-install-websoft9.png" alt="1524795775448"></p> <p>第一个 <code>apache</code> 为用户,第二个 <code>apache</code> 为用户组</p></li> <li><p>安装  <code>pure-ftpd</code></p> <p><code>yum -y install pure-ftpd</code></p></li> <li><p>配置 <code>pure-ftpd</code></p> <p>修改 <code>/etc/pure-ftpd/pure-ftpd.conf</code>  内容如下:</p> <div class="language- extra-class"><pre class="language-text"><code>ChrootEveryone              yes
MaxClientsNumber            50
MaxClientsPerIP             8
DisplayDotFiles             no
AnonymousOnly               no
NoAnonymous                 yes
DontResolve                 yes
MaxIdleTime                 10
PureDB                      /etc/pure-ftpd/pureftpd.pdb
LimitRecursion              2000 10
AnonymousCanCreateDirs      no
Umask                       133:022
AllowUserFXP                no
AllowAnonymousFXP           no
ProhibitDotFilesWrite       no
ProhibitDotFilesRead        no
AnonymousCantUpload         yes
MaxDiskUsage                80
IPV4Only                    yes
ClientCharset               utf-8
</code></pre></div></li> <li><p>创建 虚拟用户 生成用户数据 db (可用于创建多用户)</p> <p>执行命令(创建虚拟用户):</p> <p><code>pure-pw useradd www_user_name -u apache -d /data/wwwroot/default</code></p> <blockquote><p>执行后会提示设置密码,密码输入不会显示</p></blockquote> <blockquote><p>www_user_name 为虚拟用户名  apache 为步骤1所查看 /data/wwwroot/default 为FTP上传目录</p></blockquote> <p>执行命令(生成用户数据):<br> <code>pure-pw mkdb /etc/pure-ftpd/pureftpd.pdb</code></p></li> <li><p>开启服务 设置开机启动
执行一下命令:
<code>systemctl start pure-ftpd.service</code> <code>systemctl enable pure-ftpd.service</code></p></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Websoft9/linux/edit/master/docs/zh/admin-file.md" target="_blank" rel="noopener noreferrer">在Github上编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/13/2020, 11:02:54 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/linux/zh/admin-desktop.html" class="prev">
        桌面
      </a></span> <span class="next"><a href="/docs/linux/zh/admin-user.html">
        用户管理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/linux/assets/js/app.5babcefe.js" defer></script><script src="/docs/linux/assets/js/2.ea18336a.js" defer></script><script src="/docs/linux/assets/js/10.628f32fb.js" defer></script>
  </body>
</html>
