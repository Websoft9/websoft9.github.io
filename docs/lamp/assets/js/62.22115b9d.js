(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{261:function(t,e,o){"use strict";o.r(e);var a=o(0),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"deploy-a-php-application"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#deploy-a-php-application"}},[t._v("#")]),t._v(" Deploy a PHP application")]),t._v(" "),o("p",[t._v("To deploy PHP application on LAMP, you need to add "),o("strong",[t._v("VirtualHost")]),t._v(" for it")]),t._v(" "),o("p",[t._v("Overall, just need two steps:")]),t._v(" "),o("ol",[o("li",[t._v("Upload source codes of applicaiton")]),t._v(" "),o("li",[t._v("Add new VirtualHost in the file "),o("router-link",{attrs:{to:"/stack-components.html#apache"}},[t._v("Apache vhost configuration file")])],1)]),t._v(" "),o("blockquote",[o("p",[t._v("VirtualHost is vhost configuration segment. Each application must correspond to a unique VirtualHost in "),o("strong",[t._v("vhost.conf")]),t._v(".")])]),t._v(" "),o("h2",{attrs:{id:"prepare"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#prepare"}},[t._v("#")]),t._v(" Prepare")]),t._v(" "),o("p",[t._v("To deploy PHP application on LAMP, you need to know the followings:")]),t._v(" "),o("ul",[o("li",[o("strong",[t._v("Vhost Configuration File")]),t._v(": "),o("em",[t._v("/etc/httpd/vhost/vhost.conf")])]),t._v(" "),o("li",[o("strong",[t._v("Tools")]),t._v(": Using WinSCP to mange files and run command")]),t._v(" "),o("li",[o("strong",[t._v("Domain Name")]),t._v(": If you want to use Domain you must complete the Domain revolution before")]),t._v(" "),o("li",[o("strong",[t._v("Database")]),t._v(": If the database can't be created automatically during the installation process, please use "),o("router-link",{attrs:{to:"/admin-mysql.html"}},[t._v("phpMyAdmin")]),t._v(" to manage it")],1)]),t._v(" "),o("p",[t._v("Once you have a overall, you can start you application deployment now")]),t._v(" "),o("h2",{attrs:{id:"deploy-fisrt-application"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#deploy-fisrt-application"}},[t._v("#")]),t._v(" Deploy fisrt application")]),t._v(" "),o("p",[t._v("There is a example application in LAMP, we sugget you to "),o("strong",[t._v("replace the example application")]),t._v(" for deploy first application:")]),t._v(" "),o("ol",[o("li",[t._v("Use WinSCP to connect Cloud Server,")]),t._v(" "),o("li",[t._v("Delete all files in the folder "),o("em",[t._v("/data/wwwroot/www.example.com")]),t._v(", but don't delete "),o("em",[t._v("www.example.com")])]),t._v(" "),o("li",[t._v("Upload your application's codes to the folder: "),o("em",[t._v("/data/wwwroot/www.example.com")]),t._v(" "),o("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/winscp/winscp-uploadcodestoexample-websoft9.png",alt:""}})]),t._v(" "),o("li",[t._v("Modify the  "),o("code",[t._v("<VirtualHost *:80>...</VirtualHost>")]),t._v(" segment ("),o("router-link",{attrs:{to:"/solution-deployment.html#virtualhost"}},[t._v("refer to")]),t._v(") in the file "),o("em",[t._v("vhost.conf")]),t._v(" if you want to bind domain or modify folder name\n"),o("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/lamp/lamp-editvhostconf-websoft9.png",alt:""}}),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),o("p",[t._v("If you do not bind the domain and do not modify the directory name, skip steps 4 and 5.")])])],1),t._v(" "),o("li",[t._v("Save the file "),o("em",[t._v("vhost.conf")]),t._v(" and then Restart Apache Service"),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("systemctl restart httpd\n")])])])]),t._v(" "),o("li",[t._v("Using the Chrome or Firefox to visit: "),o("em",[t._v("http://domain")]),t._v(" or "),o("em",[t._v("http://IP/mysite2")]),t._v(" to visit your application")])]),t._v(" "),o("h2",{attrs:{id:"deploy-second-application"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#deploy-second-application"}},[t._v("#")]),t._v(" Deploy second application")]),t._v(" "),o("p",[t._v("Start to deploy the second application, you should add new "),o("code",[t._v("<VirtualHost *:80>...</VirtualHost>")]),t._v(" segment to the file "),o("em",[t._v("vhost.conf")])]),t._v(" "),o("ol",[o("li",[o("p",[t._v('Connect Cloud Server, then create a new folder named "mysite2" to the directory '),o("em",[t._v("/data/wwwroot")]),t._v(" "),o("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/lamp/lamp-createmysite2-websoft9.png",alt:""}})])]),t._v(" "),o("li",[o("p",[t._v("Upload your application's codes to the folder: "),o("em",[t._v("/data/wwwroot/mysite2")]),t._v(" "),o("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/lamp/lamp-uploadcodes-websoft9.png",alt:""}})])]),t._v(" "),o("li",[o("p",[t._v("Edite the file "),o("em",[t._v("vhost.conf")]),t._v(" "),o("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/lamp/lamp-editvhostconf-websoft9.png",alt:""}})]),t._v(" "),o("p",[t._v("Have domain or no domain, Choose one of the options below:")]),t._v(" "),o("ul",[o("li",[o("strong",[t._v("Have domain, you can visit application by "),o("em",[t._v("http://domain/")])])])]),t._v(" "),o("p",[t._v("Please copy the "),o("strong",[t._v("VirtualHost")]),t._v(" below to "),o("em",[t._v("vhost.conf")]),t._v(", and modify the "),o("strong",[t._v("ServerName, DocumentRoot, ErrorLog, CusomLog, Directory")])]),t._v(" "),o("pre",[o("code",[t._v('```\n#-----HTTP template start------------\n<VirtualHost *:80>\nServerName www.mydomain.com\n# ServerAlias other.mydomain.com\nDocumentRoot "/data/wwwroot/mysite2"\nErrorLog "/var/log/httpd/www.mydomain.com_error_apache.log"\nCustomLog "/var/log/httpd/www.mydomain.com_apache.log" common\n<Directory "/data/wwwroot/mysite2">\nOptions Indexes FollowSymlinks\nAllowOverride All\nRequire all granted\n</Directory>\n</VirtualHost>\n#-----HTTP template start------------\n ```\n')])]),t._v(" "),o("ul",[o("li",[o("strong",[t._v("No domain, you can visit application by "),o("em",[t._v("http://IP/mysite2")])])])]),t._v(" "),o("p",[t._v("Please copy the "),o("strong",[t._v("Alias template")]),t._v(" below to "),o("em",[t._v("vhost.conf")]),t._v(", and modify the "),o("strong",[t._v("/path, Directory")])]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v('Alias /sitename /data/wwwroot/mysite2\n<Directory "/data/wwwroot/mysite2">\nOptions Indexes FollowSymlinks\nAllowOverride All\nRequire all granted\n</Directory>\n')])])])]),t._v(" "),o("li",[o("p",[t._v("Save the file "),o("em",[t._v("vhost.conf")]),t._v(" and then Restart Apache Service")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("systemctl restart httpd\n")])])])]),t._v(" "),o("li",[o("p",[t._v("Using the Chrome or Firefox to visit: "),o("em",[t._v("http://domain")]),t._v(" or "),o("em",[t._v("http://IP/sitename")]),t._v(" to visit your application")])])]),t._v(" "),o("h2",{attrs:{id:"deploy-more-application"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#deploy-more-application"}},[t._v("#")]),t._v(" Deploy more application")]),t._v(" "),o("p",[o("strong",[t._v("Deploy more application")]),t._v(" is the same with "),o("strong",[t._v("Deploy second application")])]),t._v(" "),o("p",[t._v("Finally, we know the new and summarize the steps of the LAMP deployment site:")]),t._v(" "),o("ol",[o("li",[t._v("Upload the website code")]),t._v(" "),o("li",[t._v("Bind the domain name (not necessary)")]),t._v(" "),o("li",[t._v("Add the site configuration or modify the sample site configuration")]),t._v(" "),o("li",[t._v("Increase the database corresponding to the site (not necessary)")]),t._v(" "),o("li",[t._v("Enter the installation wizard")])]),t._v(" "),o("h2",{attrs:{id:"virtualhost"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#virtualhost"}},[t._v("#")]),t._v(" VirtualHost")]),t._v(" "),o("p",[t._v("All items in the VirtualHost must be correct, any error may cause Apache can't start and applicaiton not accessible")]),t._v(" "),o("table",[o("thead",[o("tr",[o("th",[t._v("VirtualHost Item")]),t._v(" "),o("th",[t._v("Use")]),t._v(" "),o("th",[t._v("Necessity")])])]),t._v(" "),o("tbody",[o("tr",[o("td",[t._v("ServerName")]),t._v(" "),o("td",[t._v("Primary domain")]),t._v(" "),o("td",[t._v("Required")])]),t._v(" "),o("tr",[o("td",[t._v("ServerAlias")]),t._v(" "),o("td",[t._v("Sencond")]),t._v(" "),o("td",[t._v("Optional")])]),t._v(" "),o("tr",[o("td",[t._v("DocumentRoot")]),t._v(" "),o("td",[t._v("The real website storage directory")]),t._v(" "),o("td",[t._v("Required and must be correct")])]),t._v(" "),o("tr",[o("td",[t._v("Directory")]),t._v(" "),o("td",[t._v("The real website storage directory")]),t._v(" "),o("td",[t._v("Required and must be correct")])]),t._v(" "),o("tr",[o("td",[t._v("ErrorLog")]),t._v(" "),o("td",[t._v("error logs directory")]),t._v(" "),o("td",[t._v("Suggestion")])]),t._v(" "),o("tr",[o("td",[t._v("CustomLog")]),t._v(" "),o("td",[t._v("visit logs directory")]),t._v(" "),o("td",[t._v("Suggestion")])])])]),t._v(" "),o("h2",{attrs:{id:"q-a"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#q-a"}},[t._v("#")]),t._v(" Q&A")]),t._v(" "),o("h4",{attrs:{id:"visit-my-application-dispaly-no-permission-error"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#visit-my-application-dispaly-no-permission-error"}},[t._v("#")]),t._v(' Visit my application, dispaly "no permission..." error?')]),t._v(" "),o("p",[t._v("Run the this comannd")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("chown -R apache.apache /data/wwwroot\n")])])]),o("h4",{attrs:{id:"i-can-t-restart-apache-service-after-modify-the-vhost-conf"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#i-can-t-restart-apache-service-after-modify-the-vhost-conf"}},[t._v("#")]),t._v(" I can't restart Apache service after modify the "),o("em",[t._v("vhost.conf")]),t._v("?")]),t._v(" "),o("p",[t._v("Check the application directory items in the segement of your "),o("em",[t._v("VirtualHost")])]),t._v(" "),o("h4",{attrs:{id:"i-can-t-visit-my-new-deployment-and-all-applications-on-my-server"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#i-can-t-visit-my-new-deployment-and-all-applications-on-my-server"}},[t._v("#")]),t._v(" I can't visit my new deployment and all applications on my Server")]),t._v(" "),o("p",[t._v("Check the application directory items in the segement of your "),o("em",[t._v("VirtualHost")])]),t._v(" "),o("h4",{attrs:{id:"_404-error"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_404-error"}},[t._v("#")]),t._v(" 404 error?")]),t._v(" "),o("p",[t._v("Please make sure that the "),o("em",[t._v("index.php")]),t._v(" or "),o("em",[t._v("index.html")]),t._v(" was included in the your application's direcotory")]),t._v(" "),o("h4",{attrs:{id:"_500-internal-server-error？"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_500-internal-server-error？"}},[t._v("#")]),t._v(" 500 Internal Server Error？")]),t._v(" "),o("p",[t._v("The program code is wrong, you need to analyze the program's log file.")])])}),[],!1,null,null,null);e.default=r.exports}}]);