(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{211:function(t,e,a){"use strict";a.r(e);var o=a(0),r=Object(o.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"deploy-a-php-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-a-php-application","aria-hidden":"true"}},[t._v("#")]),t._v(" Deploy a PHP application")]),t._v(" "),a("p",[t._v("To deploy PHP application on LAMP, you need to add "),a("strong",[t._v("VirtualHost")]),t._v(" for it")]),t._v(" "),a("p",[t._v("Overall, just need two steps:")]),t._v(" "),a("ol",[a("li",[t._v("Upload source codes of applicaiton")]),t._v(" "),a("li",[t._v("Add new VirtualHost in the file "),a("router-link",{attrs:{to:"/stack-components.html#apache"}},[t._v("Apache vhost configuration file")])],1)]),t._v(" "),a("blockquote",[a("p",[t._v("VirtualHost is vhost configuration segment. Each application must correspond to a unique VirtualHost in "),a("strong",[t._v("vhost.conf")]),t._v(".")])]),t._v(" "),a("h2",{attrs:{id:"prepare"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prepare","aria-hidden":"true"}},[t._v("#")]),t._v(" Prepare")]),t._v(" "),a("p",[t._v("To deploy PHP application on LAMP, you need to know the followings:")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Vhost Configuration File")]),t._v(": "),a("em",[t._v("/etc/httpd/vhost/vhost.conf")])]),t._v(" "),a("li",[a("strong",[t._v("Tools")]),t._v(": Using WinSCP to mange files and run command")]),t._v(" "),a("li",[a("strong",[t._v("Domain Name")]),t._v(": If you want to use Domain you must complete the Domain revolution before")]),t._v(" "),a("li",[a("strong",[t._v("Database")]),t._v(": If the database can't be created automatically during the installation process, please use "),a("router-link",{attrs:{to:"/admin-mysql.html"}},[t._v("phpMyAdmin")]),t._v(" to manage it")],1)]),t._v(" "),a("p",[t._v("Once you have a overall, you can start you application deployment now")]),t._v(" "),a("h2",{attrs:{id:"deploy-fisrt-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-fisrt-application","aria-hidden":"true"}},[t._v("#")]),t._v(" Deploy fisrt application")]),t._v(" "),a("p",[t._v("There is a example application in LAMP, we sugget you to "),a("strong",[t._v("replace the example application")]),t._v(" for deploy first application:")]),t._v(" "),a("ol",[a("li",[t._v("Use WinSCP to connect Cloud Server,")]),t._v(" "),a("li",[t._v("Delete all files in the folder "),a("em",[t._v("/data/wwwroot/www.example.com")]),t._v(", but don't delete "),a("em",[t._v("www.example.com")])]),t._v(" "),a("li",[t._v("Upload your application's codes to the folder: "),a("em",[t._v("/data/wwwroot/www.example.com")]),t._v(" "),a("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/winscp/winscp-uploadcodestoexample-websoft9.png",alt:""}})]),t._v(" "),a("li",[t._v("Modify the  "),a("code",[t._v("<VirtualHost *:80>...</VirtualHost>")]),t._v(" segment ("),a("router-link",{attrs:{to:"/solution-deployment.html#virtualhost"}},[t._v("refer to")]),t._v(") in the file "),a("em",[t._v("vhost.conf")]),t._v(" if you want to bind domain or modify folder name\n"),a("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/lamp/lamp-editvhostconf-websoft9.png",alt:""}}),a("div",{staticClass:"warning custom-block"},[a("p",[t._v("If you do not bind the domain and do not modify the directory name, skip steps 4 and 5.")])])],1),t._v(" "),a("li",[t._v("Save the file "),a("em",[t._v("vhost.conf")]),t._v(" and then Restart Apache Service"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("systemctl restart httpd\n")])])])]),t._v(" "),a("li",[t._v("Using the Chrome or Firefox to visit: "),a("em",[t._v("http://domain")]),t._v(" or "),a("em",[t._v("http://IP/mysite2")]),t._v(" to visit your application")])]),t._v(" "),a("h2",{attrs:{id:"deploy-second-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-second-application","aria-hidden":"true"}},[t._v("#")]),t._v(" Deploy second application")]),t._v(" "),a("p",[t._v("Start to deploy the second application, you should add new "),a("code",[t._v("<VirtualHost *:80>...</VirtualHost>")]),t._v(" segment to the file "),a("em",[t._v("vhost.conf")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v('Connect Cloud Server, then create a new folder named "mysite2" to the directory '),a("em",[t._v("/data/wwwroot")]),t._v(" "),a("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/lamp/lamp-createmysite2-websoft9.png",alt:""}})])]),t._v(" "),a("li",[a("p",[t._v("Upload your application's codes to the folder: "),a("em",[t._v("/data/wwwroot/mysite2")]),t._v(" "),a("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/lamp/lamp-uploadcodes-websoft9.png",alt:""}})])]),t._v(" "),a("li",[a("p",[t._v("Edite the file "),a("em",[t._v("vhost.conf")]),t._v(" "),a("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/lamp/lamp-editvhostconf-websoft9.png",alt:""}})]),t._v(" "),a("p",[t._v("Have domain or no domain, Choose one of the options below:")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Have domain, you can visit application by "),a("em",[t._v("http://domain/")])])])]),t._v(" "),a("p",[t._v("Please copy the "),a("strong",[t._v("VirtualHost")]),t._v(" below to "),a("em",[t._v("vhost.conf")]),t._v(", and modify the "),a("strong",[t._v("ServerName, DocumentRoot, ErrorLog, CusomLog, Directory")])]),t._v(" "),a("pre",[a("code",[t._v('```\n#-----HTTP template start------------\n<VirtualHost *:80>\nServerName www.mydomain.com\n# ServerAlias other.mydomain.com\nDocumentRoot "/data/wwwroot/mysite2"\nErrorLog "/var/log/httpd/www.mydomain.com_error_apache.log"\nCustomLog "/var/log/httpd/www.mydomain.com_apache.log" common\n<Directory "/data/wwwroot/mysite2">\nOptions Indexes FollowSymlinks\nAllowOverride All\nRequire all granted\n</Directory>\n</VirtualHost>\n#-----HTTP template start------------\n ```\n')])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("No domain, you can visit application by "),a("em",[t._v("http://IP/mysite2")])])])]),t._v(" "),a("p",[t._v("Please copy the "),a("strong",[t._v("Alias template")]),t._v(" below to "),a("em",[t._v("vhost.conf")]),t._v(", and modify the "),a("strong",[t._v("/path, Directory")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('Alias /sitename /data/wwwroot/mysite2\n<Directory "/data/wwwroot/mysite2">\nOptions Indexes FollowSymlinks\nAllowOverride All\nRequire all granted\n</Directory>\n')])])])]),t._v(" "),a("li",[a("p",[t._v("Save the file "),a("em",[t._v("vhost.conf")]),t._v(" and then Restart Apache Service")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("systemctl restart httpd\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Using the Chrome or Firefox to visit: "),a("em",[t._v("http://domain")]),t._v(" or "),a("em",[t._v("http://IP/sitename")]),t._v(" to visit your application")])])]),t._v(" "),a("h2",{attrs:{id:"deploy-more-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-more-application","aria-hidden":"true"}},[t._v("#")]),t._v(" Deploy more application")]),t._v(" "),a("p",[a("strong",[t._v("Deploy more application")]),t._v(" is the same with "),a("strong",[t._v("Deploy second application")])]),t._v(" "),a("p",[t._v("Finally, we know the new and summarize the steps of the LAMP deployment site:")]),t._v(" "),a("ol",[a("li",[t._v("Upload the website code")]),t._v(" "),a("li",[t._v("Bind the domain name (not necessary)")]),t._v(" "),a("li",[t._v("Add the site configuration or modify the sample site configuration")]),t._v(" "),a("li",[t._v("Increase the database corresponding to the site (not necessary)")]),t._v(" "),a("li",[t._v("Enter the installation wizard")])]),t._v(" "),a("h2",{attrs:{id:"virtualhost"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#virtualhost","aria-hidden":"true"}},[t._v("#")]),t._v(" VirtualHost")]),t._v(" "),a("p",[t._v("All items in the VirtualHost must be correct, any error may cause Apache can't start and applicaiton not accessible")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("VirtualHost Item")]),t._v(" "),a("th",[t._v("Use")]),t._v(" "),a("th",[t._v("Necessity")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("ServerName")]),t._v(" "),a("td",[t._v("Primary domain")]),t._v(" "),a("td",[t._v("Required")])]),t._v(" "),a("tr",[a("td",[t._v("ServerAlias")]),t._v(" "),a("td",[t._v("Sencond")]),t._v(" "),a("td",[t._v("Optional")])]),t._v(" "),a("tr",[a("td",[t._v("DocumentRoot")]),t._v(" "),a("td",[t._v("The real website storage directory")]),t._v(" "),a("td",[t._v("Required and must be correct")])]),t._v(" "),a("tr",[a("td",[t._v("Directory")]),t._v(" "),a("td",[t._v("The real website storage directory")]),t._v(" "),a("td",[t._v("Required and must be correct")])]),t._v(" "),a("tr",[a("td",[t._v("ErrorLog")]),t._v(" "),a("td",[t._v("error logs directory")]),t._v(" "),a("td",[t._v("Suggestion")])]),t._v(" "),a("tr",[a("td",[t._v("CustomLog")]),t._v(" "),a("td",[t._v("visit logs directory")]),t._v(" "),a("td",[t._v("Suggestion")])])])]),t._v(" "),a("h2",{attrs:{id:"q-a"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q-a","aria-hidden":"true"}},[t._v("#")]),t._v(" Q&A")]),t._v(" "),a("h4",{attrs:{id:"visit-my-application-dispaly-no-permission-error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#visit-my-application-dispaly-no-permission-error","aria-hidden":"true"}},[t._v("#")]),t._v(' Visit my application, dispaly "no permission..." error?')]),t._v(" "),a("p",[t._v("Run the this comannd")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("chown -R apache.apache /data/wwwroot\n")])])]),a("h4",{attrs:{id:"i-can-t-restart-apache-service-after-modify-the-vhost-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#i-can-t-restart-apache-service-after-modify-the-vhost-conf","aria-hidden":"true"}},[t._v("#")]),t._v(" I can't restart Apache service after modify the "),a("em",[t._v("vhost.conf")]),t._v("?")]),t._v(" "),a("p",[t._v("Check the application directory items in the segement of your "),a("em",[t._v("VirtualHost")])]),t._v(" "),a("h4",{attrs:{id:"i-can-t-visit-my-new-deployment-and-all-applications-on-my-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#i-can-t-visit-my-new-deployment-and-all-applications-on-my-server","aria-hidden":"true"}},[t._v("#")]),t._v(" I can't visit my new deployment and all applications on my Server")]),t._v(" "),a("p",[t._v("Check the application directory items in the segement of your "),a("em",[t._v("VirtualHost")])]),t._v(" "),a("h4",{attrs:{id:"_404-error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_404-error","aria-hidden":"true"}},[t._v("#")]),t._v(" 404 error?")]),t._v(" "),a("p",[t._v("Please make sure that the "),a("em",[t._v("index.php")]),t._v(" or "),a("em",[t._v("index.html")]),t._v(" was included in the your application's direcotory")]),t._v(" "),a("h4",{attrs:{id:"_500-internal-server-error？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_500-internal-server-error？","aria-hidden":"true"}},[t._v("#")]),t._v(" 500 Internal Server Error？")]),t._v(" "),a("p",[t._v("The program code is wrong, you need to analyze the program's log file.")])])},[],!1,null,null,null);e.default=r.exports}}]);