(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{232:function(t,a,s){"use strict";s.r(a);var e=s(0),l=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"smtp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#smtp"}},[t._v("#")]),t._v(" SMTP")]),t._v(" "),s("p",[t._v("大量用户实践反馈，使用"),s("strong",[t._v("第三方 SMTP 服务发送邮件")]),t._v("是一种最稳定可靠的方式。")]),t._v(" "),s("p",[t._v("请勿尝试在服务器上安装sendmail等发邮件方案，因为邮件系统的路由配置受制与域名、防火墙、路由等多种因素制约，导致不稳定、不易维护、诊断故障困难。")]),t._v(" "),s("p",[t._v("下面以"),s("strong",[t._v("QQ企业邮箱")]),t._v("为例，提供设置 GitLab 发邮件的步骤：")]),t._v(" "),s("ol",[s("li",[t._v("在QQ邮箱管理控制台获取 SMTP 相关参数"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("SMTP host: smtp.exmail.qq.com\nSMTP port: 465 or 587 for SSL-encrypted email\nSMTP Authentication: must be checked\nSMTP Encryption: must SSL\nSMTP username: xxxx@xx.com\nSMTP password: #wwBJ8    //需要注意的是密码中不能包含单引号，否则出错\n")])])])]),t._v(" "),s("li",[t._v("通过 SFTP 工具远程连接服务器，修改 GitLab 配置文件："),s("em",[t._v("/etc/gitlab/gitlab.rb")]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("gitlab_rails['smtp_enable'] = true\ngitlab_rails['smtp_address'] = \"smtp.exmail.qq.com\"\ngitlab_rails['smtp_port'] = 465\ngitlab_rails['smtp_user_name'] = \"xxxx@xx.com\"\ngitlab_rails['smtp_password'] = \"password\"\ngitlab_rails['smtp_authentication'] = \"login\"\ngitlab_rails['smtp_enable_starttls_auto'] = true\ngitlab_rails['smtp_tls'] = true\ngitlab_rails['gitlab_email_from'] = 'xxxx@xx.com'\n")])])])]),t._v(" "),s("li",[t._v("重启服务"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo gitlab-ctl reconfigure\n")])])])])]),t._v(" "),s("p",[t._v("GitLab 官方提供了数十种不同 SMTP 服务提供商的配置方法，请参考官方文档： "),s("a",{attrs:{href:"https://docs.gitlab.com/omnibus/settings/smtp.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("SMTP settings"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=l.exports}}]);