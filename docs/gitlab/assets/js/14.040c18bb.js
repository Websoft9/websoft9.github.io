(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{203:function(e,t,a){"use strict";a.r(t);var n=a(0),s=Object(n.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"update-upgrade"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-upgrade","aria-hidden":"true"}},[e._v("#")]),e._v(" Update & Upgrade")]),e._v(" "),a("p",[e._v("Updates and upgrades are one of the maintenance tasks for sytem. Programs that are not upgraded for a long time, like buildings that are not maintained for a long time, will accelerate aging and gradually lose functionality until they are unavailable.")]),e._v(" "),a("p",[e._v("You should know the differences between the terms "),a("strong",[e._v("Update")]),e._v(" and "),a("strong",[e._v("Upgrade")]),e._v("("),a("a",{attrs:{href:"https://support.websoft9.com/docs/faq/tech-upgrade.html#update-vs-upgrade",target:"_blank",rel:"noopener noreferrer"}},[e._v("Extended reading"),a("OutboundLink")],1),e._v(")")]),e._v(" "),a("ul",[a("li",[e._v("Operating system patching is "),a("strong",[e._v("Update")]),e._v(", Ubuntu16.04 to Ubuntu18.04 is "),a("strong",[e._v("Upgrade")])]),e._v(" "),a("li",[e._v("MySQL5.6.25 to MySQL5.6.30 is "),a("strong",[e._v("Update")]),e._v(", MySQL5.6 to MySQL5.7 is "),a("strong",[e._v("Upgrade")])])]),e._v(" "),a("p",[e._v("For GitLab maintenance, focus on the following two Update & Upgrade jobs")]),e._v(" "),a("ul",[a("li",[e._v("Sytem update(Operating System and Running Environment)")]),e._v(" "),a("li",[e._v("GitLab upgrade")])]),e._v(" "),a("h2",{attrs:{id:"system-update"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#system-update","aria-hidden":"true"}},[e._v("#")]),e._v(" System Update")]),e._v(" "),a("p",[e._v("Run an update command to complete the system update:")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("#For Ubuntu\napt update && apt upgrade -y\n\n#For Centos&Redhat\nyum update -y\n")])])]),a("blockquote",[a("p",[e._v("This deployment package is preconfigured with a scheduled task for automatic updates. If you want to remove the automatic update, please delete the corresponding Cron")])]),e._v(" "),a("h2",{attrs:{id:"gitlab-upgrade"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-upgrade","aria-hidden":"true"}},[e._v("#")]),e._v(" GitLab Upgrade")]),e._v(" "),a("p",[e._v("GitLab provide the "),a("a",{attrs:{href:"https://docs.gitlab.com/omnibus/update/README.html#updating-using-the-official-repositories",target:"_blank",rel:"noopener noreferrer"}},[e._v("Upgrade docs"),a("OutboundLink")],1),e._v(". If you want to upgrade it, just need to run these command below:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Debian/Ubuntu\nsudo apt-get update\nsudo apt-get install gitlab-ce\n\n# Centos/RHEL\nsudo yum install gitlab-ce\n")])])]),a("h2",{attrs:{id:"ce-to-ee"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ce-to-ee","aria-hidden":"true"}},[e._v("#")]),e._v(" CE to EE")]),e._v(" "),a("p",[e._v("To upgrade an existing GitLab Community Edition (CE) server to GitLab Enterprise Edition (EE), all you have to do is install the EE package on top of CE.")]),e._v(" "),a("ol",[a("li",[e._v("Get the CE version nubmer"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# For Debian/Ubuntu\nsudo apt-cache policy gitlab-ce | grep Installed\n\n# For CentOS/RHEL\nsudo rpm -q gitlab-ce\n")])])])]),e._v(" "),a("li",[e._v("Match the EE version number.e.g. the CE number is "),a("em",[e._v("8.6.7-ce.0")]),e._v(", then the EE number should be "),a("em",[e._v("8.6.7-ee.0")])]),e._v(" "),a("li",[e._v("Add the gitlab-ee Apt or Yum repository"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# For Debian/Ubuntu\ncurl -s https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.deb.sh | sudo bash\n\n# For CentOS/RHEL\ncurl -s https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash\n")])])])]),e._v(" "),a("li",[e._v("Install the correct GitLab-EE version(system will automatically uninstall CE version the same time)"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("........................................\n# For Debian/Ubuntu\n........................................\n## Make sure the repositories are up-to-date\nsudo apt-get update\n\n## Install the package using the version you wrote down from step 1\nsudo apt-get install gitlab-ee=8.6.7-ee.0\n\n## Reconfigure GitLab\nsudo gitlab-ctl reconfigure\n\n........................................\n# For CentOS/RHEL\n........................................\n## Install the package using the version you wrote down from step 1\nsudo yum install gitlab-ee-8.6.7-ee.0.el7.x86_64\n\n## Reconfigure GitLab\nsudo gitlab-ctl reconfigure\n")])])])]),e._v(" "),a("li",[e._v("Go to the GitLab admin panel of your server (/admin/license/new) and upload your license file.")]),e._v(" "),a("li",[e._v("After you confirm that GitLab is working as expected, you may remove the old Community Edition repository:"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# For Debian/Ubuntu\nsudo rm /etc/apt/sources.list.d/gitlab_gitlab-ce.list\n\n# For CentOS/RHEL\nsudo rm /etc/yum.repos.d/gitlab_gitlab-ce.repo\n")])])])])]),e._v(" "),a("p",[e._v("More details about CE upgrade to EE, please refer to official docs: "),a("a",{attrs:{href:"https://docs.gitlab.com/omnibus/update/README.html#updating-community-edition-to-enterprise-edition",target:"_blank",rel:"noopener noreferrer"}},[e._v("Updating Community Edition to Enterprise Edition"),a("OutboundLink")],1)])])},[],!1,null,null,null);t.default=s.exports}}]);