(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{230:function(t,a,r){"use strict";r.r(a);var e=r(0),s=Object(e.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"参数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),r("p",[t._v("本GitLab采用 "),r("a",{attrs:{href:"https://gitlab.com/gitlab-org/omnibus-gitlab",target:"_blank",rel:"noopener noreferrer"}},[t._v("Omnibus GitLab包"),r("OutboundLink")],1),t._v(" 的安装方式。Omnibus GitLab 是官方推荐的一种安装方法，它自带了 GitLab 所需的所有组件和服务，并可以省去繁琐的配置，同时它自带 CLI 工具，便于 GitLab 升级和维护。")]),t._v(" "),r("h2",{attrs:{id:"架构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[t._v("#")]),t._v(" 架构")]),t._v(" "),r("p",[t._v("下面是一个简化的架构图，可用于了解GitLab的架构。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://libs.websoft9.com/Websoft9/DocsPicture/en/gitlab/architecture_simplified.png",alt:""}})]),t._v(" "),r("h2",{attrs:{id:"组件和版本"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#组件和版本"}},[t._v("#")]),t._v(" 组件和版本")]),t._v(" "),r("p",[t._v("GitLab 包含数十种组件("),r("a",{attrs:{href:"https://docs.gitlab.com/ee/development/architecture.html#component-list",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看"),r("OutboundLink")],1),t._v(")，通过 "),r("em",[t._v("/opt/gitlab/version-manifest.txt")]),t._v(" 查看服务器上所有组件名称和版本")]),t._v(" "),r("h2",{attrs:{id:"路径"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#路径"}},[t._v("#")]),t._v(" 路径")]),t._v(" "),r("h3",{attrs:{id:"gitlab"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gitlab"}},[t._v("#")]),t._v(" GitLab")]),t._v(" "),r("p",[t._v("GitLab 配置文件： "),r("em",[t._v("/etc/gitlab/gitlab.rb")]),r("br"),t._v("\nGitLab 及所有组件配置： "),r("em",[t._v("/opt/gitlab")]),r("br"),t._v("\nGitLab Repository 存储目录： "),r("em",[t._v("/var/opt/gitlab/git-data")]),r("br"),t._v("\nGitLab 备份目录： "),r("em",[t._v("/var/opt/gitlab/backups")])]),t._v(" "),r("h3",{attrs:{id:"unicorn"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#unicorn"}},[t._v("#")]),t._v(" Unicorn")]),t._v(" "),r("p",[t._v("Unicorn 日志目录： "),r("em",[t._v("/var/log/gitlab/unicorn")])]),t._v(" "),r("h3",{attrs:{id:"sidekiq"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sidekiq"}},[t._v("#")]),t._v(" Sidekiq")]),t._v(" "),r("p",[t._v("Unicorn 日志目录： "),r("em",[t._v("/var/log/gitlab/sidekiq")])]),t._v(" "),r("h3",{attrs:{id:"nginx"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" Nginx")]),t._v(" "),r("p",[t._v("Nginx 日志目录: "),r("em",[t._v("/var/log/gitlab/nginx")]),r("br"),t._v("\nNginx 配置文件: "),r("em",[t._v("/var/opt/gitlab/nginx/conf/nginx.conf")]),r("br"),t._v("\nGitLab 核心 Nginx 配置文件:  "),r("em",[t._v("/var/opt/gitlab/nginx/conf/gitlab-http.conf")])]),t._v(" "),r("h3",{attrs:{id:"postgresql"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#postgresql"}},[t._v("#")]),t._v(" PostgreSQL")]),t._v(" "),r("p",[t._v("PostgreSQL 安装目录： "),r("em",[t._v("/var/opt/gitlab/postgresql")]),r("br"),t._v("\nPostgreSQL 日志目录: "),r("em",[t._v("/var/log/gitlab/postgresql")]),r("br"),t._v("\nPostgreSQL-Exporter 日志目录： "),r("em",[t._v("/var/log/gitlab/postgres-exporter")]),r("br"),t._v("\nPostgreSQL 数据目录： "),r("em",[t._v("/var/opt/gitlab/postgresql/data")])]),t._v(" "),r("h3",{attrs:{id:"redis"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[t._v("#")]),t._v(" Redis")]),t._v(" "),r("p",[t._v("Redis 安装目录： "),r("em",[t._v("/var/opt/gitlab/redis")]),r("br"),t._v("\nRedis 日志目录： "),r("em",[t._v("/var/log/gitlab/redis")])]),t._v(" "),r("h2",{attrs:{id:"端口号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#端口号"}},[t._v("#")]),t._v(" 端口号")]),t._v(" "),r("p",[t._v("系统所用到的端口号，请通过官方文档 "),r("a",{attrs:{href:"https://docs.gitlab.com/omnibus/package-information/defaults.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Package defaults"),r("OutboundLink")],1),t._v(" 查阅。在云服务器中，通过 "),r("strong",[r("a",{attrs:{href:"https://support.websoft9.com/docs/faq/zh/tech-instance.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("安全组设置"),r("OutboundLink")],1)]),t._v(" 来控制（开启或关闭）端口是否可以被外部访问。")]),t._v(" "),r("p",[t._v("本应用建议开启的端口如下：")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("名称")]),t._v(" "),r("th",[t._v("端口号")]),t._v(" "),r("th",[t._v("用途")]),t._v(" "),r("th",[t._v("必要性")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("HTTP")]),t._v(" "),r("td",[t._v("80")]),t._v(" "),r("td",[t._v("通过http访问GitLab")]),t._v(" "),r("td",[t._v("必须")])]),t._v(" "),r("tr",[r("td",[t._v("HTTPS")]),t._v(" "),r("td",[t._v("443")]),t._v(" "),r("td",[t._v("通过https访问GitLab")]),t._v(" "),r("td",[t._v("可选")])])])])])}),[],!1,null,null,null);a.default=s.exports}}]);